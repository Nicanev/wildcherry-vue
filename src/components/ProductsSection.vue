<template lang="pug">
section.products
  .products__container
    .products__title.
      Распродажа до 20.09 
    ul.products__list
        li.products__product.card(v-for="product in products")
          .card__img
            img(:src="product.image", alt="Nothing Phone")
            .card__favourite
              <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.4687 6.00589L19.47 6.02166L19.4724 6.03732C19.4871 6.13647 19.5815 6.87817 19.3082 8.12232L19.3081 8.12246C18.9148 9.91563 18.0065 11.5466 16.68 12.8402C16.6795 12.8407 16.679 12.8412 16.6785 12.8417L9.94311 19.3042L3.32163 12.8415L3.32135 12.8412C1.99413 11.5478 1.08526 9.91591 0.691748 8.12244L0.691729 8.12235C0.418355 6.87747 0.512926 6.13609 0.527737 6.03813L0.5302 6.02184L0.531585 6.00542C0.808521 2.72274 2.93737 0.499998 5.44562 0.499998C7.10462 0.499998 8.61288 1.45305 9.50542 3.09568L9.93994 3.89539L10.3819 3.09974C11.2804 1.48198 12.8588 0.500411 14.5543 0.500411C17.0629 0.500411 19.1914 2.72313 19.4687 6.00589Z" fill="black" stroke="#EAEAF6"/>
              </svg>
            .card__discount.active -{{ product.discount }}%
            .card__advertisement Реклама
          .card__body
            .card__price
              .card__current-price {{ Math.round(product.price / 100 * product.discount) }} руб.
              .card__old-price.active {{ product.price }}
            .card__title {{ product.name }}
            .card__rating
              <svg viewBox="0 0 96 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_23_570)">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M68.3308 1.23002L70.1108 5.65002L74.6708 6.06102C74.9868 6.09002 75.1158 6.50302 74.8758 6.72102L71.4178 9.86302L72.4538 14.537C72.5258 14.861 72.1898 15.117 71.9188 14.944L67.9998 12.467L64.0818 14.944C63.8098 15.116 63.4748 14.861 63.5468 14.537L64.5828 9.86302L61.1238 6.72102C60.8838 6.50302 61.0118 6.08902 61.3288 6.06102L65.8888 5.65002L67.6688 1.23002C67.6938 1.16243 67.739 1.10412 67.7981 1.06294C67.8573 1.02177 67.9277 0.999695 67.9998 0.999695C68.0719 0.999695 68.1422 1.02177 68.2014 1.06294C68.2606 1.10412 68.3057 1.16243 68.3308 1.23002ZM8.33077 1.23002L10.1108 5.65002L14.6708 6.06102C14.9868 6.09002 15.1158 6.50302 14.8758 6.72102L11.4178 9.86302L12.4538 14.537C12.5258 14.861 12.1898 15.117 11.9188 14.944L7.99977 12.467L4.08177 14.944C3.80977 15.116 3.47477 14.861 3.54677 14.537L4.58277 9.86302L1.12477 6.72102C0.884773 6.50302 1.01177 6.08902 1.32877 6.06102L5.88877 5.65002L7.66877 1.23002C7.69383 1.16243 7.73897 1.10412 7.79815 1.06294C7.85732 1.02177 7.92768 0.999695 7.99977 0.999695C8.07186 0.999695 8.14222 1.02177 8.2014 1.06294C8.26057 1.10412 8.30572 1.16243 8.33077 1.23002ZM28.3308 1.23002L30.1108 5.65002L34.6708 6.06102C34.9868 6.09002 35.1158 6.50302 34.8758 6.72102L31.4178 9.86302L32.4538 14.537C32.5258 14.861 32.1898 15.117 31.9188 14.944L27.9998 12.467L24.0818 14.944C23.8098 15.116 23.4748 14.861 23.5468 14.537L24.5828 9.86302L21.1238 6.72102C20.8838 6.50302 21.0118 6.08902 21.3288 6.06102L25.8888 5.65002L27.6688 1.23002C27.6938 1.16243 27.739 1.10412 27.7981 1.06294C27.8573 1.02177 27.9277 0.999695 27.9998 0.999695C28.0719 0.999695 28.1422 1.02177 28.2014 1.06294C28.2606 1.10412 28.3057 1.16243 28.3308 1.23002ZM48.3308 1.23002L50.1108 5.65002L54.6708 6.06102C54.9868 6.09002 55.1158 6.50302 54.8758 6.72102L51.4178 9.86302L52.4538 14.537C52.5258 14.861 52.1898 15.117 51.9188 14.944L47.9998 12.467L44.0818 14.944C43.8098 15.116 43.4748 14.861 43.5468 14.537L44.5828 9.86302L41.1238 6.72102C40.8838 6.50302 41.0118 6.08902 41.3288 6.06102L45.8888 5.65002L47.6688 1.23002C47.6938 1.16243 47.739 1.10412 47.7981 1.06294C47.8573 1.02177 47.9277 0.999695 47.9998 0.999695C48.0719 0.999695 48.1422 1.02177 48.2014 1.06294C48.2606 1.10412 48.3057 1.16243 48.3308 1.23002Z" fill="#DE3163" stroke="#DE3163"/>
              <path d="M88.3308 1.23002L90.1118 5.65002L94.6708 6.06102C94.9868 6.09002 95.1158 6.50302 94.8758 6.72102L91.4178 9.86302L92.4538 14.537C92.5258 14.861 92.1898 15.117 91.9178 14.944L87.9998 12.467L84.0818 14.944C83.8098 15.116 83.4748 14.861 83.5468 14.537L84.5828 9.86302L81.1248 6.72102C80.8848 6.50302 81.0118 6.08902 81.3288 6.06102L85.8878 5.65002L87.6688 1.23002C87.6938 1.16243 87.739 1.10412 87.7981 1.06294C87.8573 1.02177 87.9277 0.999695 87.9998 0.999695C88.0719 0.999695 88.1422 1.02177 88.2014 1.06294C88.2606 1.10412 88.3057 1.16243 88.3308 1.23002Z" fill="#D5D5D5" stroke="#D5D5D5"/>
              </g>
              <defs>
              <clipPath id="clip0_23_570">
              <rect width="96" height="16" fill="white"/>
              </clipPath>
              </defs>
              </svg>
              span {{ product.numReview }}
            .card__btn
              button.btn(@click="putBasket(product.id)") В корзину
</template>

<script>
import axios from "axios";
export default {
  name: "ProductsSection",
  data() {
    return {
      products: [],
    };
  },
  methods: {
    putBasket(product) {
      if (!this.$cookies.get("product")) {
        this.$cookies.set("product", product);
      } else {
        this.$cookies.set(
          "product",
          this.$cookies.get("product") + ";" + product
        );
      }
      let a = this.$cookies.get("product");
      console.log(a);
    },
  },
  mounted() {
    axios
      .get("http://wildcherry/public/api/products")
      .then((response) => console.log((this.products = response.data)));
  },
};
</script>

<style scoped></style>
